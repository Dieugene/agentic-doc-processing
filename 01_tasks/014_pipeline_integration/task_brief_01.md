# –ó–∞–¥–∞—á–∞ 014: Pipeline Integration & Setup

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π VLM-OCR –º–æ–¥—É–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π pipeline, –∑–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ –∑–∞–≥–ª—É—à–∫–∏ –Ω–∞ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

**–≠—Ç–æ —Å–æ–≤–º–µ—Å—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —É—á–∞—Å—Ç–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.**

## –ó–∞—á–µ–º

–ü–æ—Å–ª–µ –∑–∞–¥–∞—á 006-012 —É –Ω–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π pipeline, –Ω–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **MockVLMOCR** (–∑–∞–≥–ª—É—à–∫–∞). –ß—Ç–æ–±—ã "–ø–æ—â—É–ø–∞—Ç—å" —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏, –Ω—É–∂–Ω–æ:
1. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π VLM-OCR –º–æ–¥—É–ª—å
2. –ó–∞–º–µ–Ω–∏—Ç—å –∑–∞–≥–ª—É—à–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å API –∫–ª—é—á–∏ –∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ

## Milestone

**–≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–¥–∞—á–∞ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã pipeline.** –ü–æ—Å–ª–µ –Ω–µ—ë –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã, –∞ –Ω–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–≥–ª—É—à–∫–∏.

---

## Acceptance Criteria

- [x] AC-001: –†–µ–∞–ª—å–Ω—ã–π VLM-OCR –º–æ–¥—É–ª—å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ pipeline
- [x] AC-002: MockVLMOCR –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –≤ production code
- [x] AC-003: API –∫–ª—é—á–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ `.env` —Ñ–∞–π–ª–µ
- [x] AC-004: Pipeline —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [x] AC-005: DocumentSkeleton —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä–µ–∞–ª—å–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- [x] AC-006: –í—Å–µ –∑–∞–≥–ª—É—à–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ README
- [x] AC-007: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ

---

## –¢–µ–∫—É—â–∏–µ –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è –∑–∞–º–µ–Ω—ã

### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï (–±–ª–æ–∫–∏—Ä—É—é—Ç —Ä–µ–∞–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É)

#### 1. MockVLMOCR ‚Üí Real VLM-OCR Module

**–§–∞–π–ª:** `02_src/processing/mock_vlm_ocr.py`

**–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
```python
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ mock –¥–∞–Ω–Ω—ã–µ:
{
    "text": "Mock document text from {num_images} pages...",
    "structure": {
        "headers": [
            {"level": 1, "title": "1. –†–∞–∑–¥–µ–ª", "page": 1},
            {"level": 2, "title": "1.1. –ü–æ–¥—Ä–∞–∑–¥–µ–ª", "page": 2}
        ]
    },
    "tables": [
        {"id": "table_1", "type": "NUMERIC", "page": 2, ...}
    ]
}
```

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- `02_src/processing/tests/integration/conftest.py:167` (—Ç–µ—Å—Ç—ã)
- –ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ CLI (–∑–∞–¥–∞—á–∞ 013)

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π VLM-OCR –º–æ–¥—É–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –°–æ–∑–¥–∞—Ç—å –∞–¥–∞–ø—Ç–µ—Ä –µ—Å–ª–∏ API –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è
- [ ] –û—Å—Ç–∞–≤–∏—Ç—å MockVLMOCR —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤

---

#### 2. LangChain API Keys ‚Üí Real Credentials

**–§–∞–π–ª—ã:**
- `02_src/gateway/simple_llm_gateway.py:41-52` (—Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤)
- –¢–µ—Å—Ç—ã: `02_src/gateway/tests/test_simple_gateway.py` (–º–æ–∫–∏ —á–µ—Ä–µ–∑ sys.modules)

**–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
```python
# –í —Ç–µ—Å—Ç–∞—Ö langchain –∑–∞–º–æ–∫–∞–Ω:
sys.modules['langchain'] = MagicMock()
# –†–µ–∞–ª—å–Ω—ã–µ API –≤—ã–∑–æ–≤—ã –ù–ï –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç
```

**–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:**
```python
# –ö–ª–∏–µ–Ω—Ç—ã —É–∂–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –∫–ª—é—á–∏:
from langchain_anthropic import ChatAnthropic
from langchain_openai import ChatOpenAI

# –ù–æ –Ω—É–∂–Ω—ã ANTHROPIC_API_KEY –∏ OPENAI_API_KEY
```

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
- [ ] –°–æ–∑–¥–∞—Ç—å `.env` —Ñ–∞–π–ª —Å API –∫–ª—é—á–∞–º–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å `.env.example` —Å —à–∞–±–ª–æ–Ω–æ–º
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `.gitignore` –¥–ª—è `.env`

---

#### 3. Poppler Dependency Check

**–§–∞–π–ª:** `02_src/processing/tests/integration/conftest.py:29-60`

**–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –¢–µ—Å—Ç—ã –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è –µ—Å–ª–∏ Poppler –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –ù—É–∂–µ–Ω –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã Renderer

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Poppler —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –≤ README
- [ ] Windows: https://github.com/oschwartz10612/poppler-windows/releases/

---

### üü° –ù–ï–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï (—Ç–µ—Å—Ç–æ–≤—ã–µ only)

#### 4. DocumentProcessor (Test Orchestrator)

**–§–∞–π–ª:** `02_src/processing/tests/integration/conftest.py:72-147`

**–°—Ç–∞—Ç—É—Å:** –û–ö, —ç—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
- –ù–ï –Ω—É–∂–Ω–æ –∑–∞–º–µ–Ω—è—Ç—å
- –î–ª—è CLI (013) –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ VLM-OCR –º–æ–¥—É–ª—é

### –û–∂–∏–¥–∞–µ–º—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–°–∏—Å—Ç–µ–º–∞ –æ–∂–∏–¥–∞–µ—Ç –æ—Ç VLM-OCR –º–æ–¥—É–ª—è —Å–ª–µ–¥—É—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

```python
class VLMOCRModule:
    """–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å VLM-OCR –º–æ–¥—É–ª—è."""

    def extract(
        self,
        images: List[bytes],  # PNG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü
        prompts: List[str]    # Extractive prompts
    ) -> Union[VLMOCRResponse, dict]:
        """
        –ò–∑–≤–ª–µ—á—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

        Args:
            images: –°–ø–∏—Å–æ–∫ PNG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (bytes)
            prompts: –°–ø–∏—Å–æ–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤

        Returns:
            VLMOCRResponse {
                success: bool,
                results: [
                    {
                        prompt: str,
                        data: {
                            "text": str,           # –î–ª—è PROMPT_TEXT
                            "structure": {         # –î–ª—è PROMPT_STRUCTURE
                                "headers": [
                                    {"level": int, "title": str, "page": int}
                                ]
                            },
                            "tables": [            # –î–ª—è PROMPT_TABLES
                                {
                                    "id": str,
                                    "type": "NUMERIC" | "TEXT_MATRIX",
                                    "page": int,
                                    "location": {"bbox": [x1,y1,x2,y2], "page": int},
                                    "preview": str
                                }
                            ]
                        }
                    }
                ]
            }
            –ò–õ–ò dict —Å –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
        """
```

### Batch Prompts —Å–∏—Å—Ç–µ–º—ã

**VLMOCRExtractor** (`02_src/processing/vlm_ocr_extractor.py:99-101`) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 3 –ø—Ä–æ–º–ø—Ç–∞:

```python
PROMPT_TEXT = "–í–µ—Ä–Ω–∏ –≤–µ—Å—å —Ç–µ–∫—Å—Ç —Å —ç—Ç–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü"
PROMPT_STRUCTURE = "–û–ø–∏—à–∏ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É: –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –∏—Ö —É—Ä–æ–≤–Ω–∏"
PROMPT_TABLES = "–ù–∞–π–¥–∏ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã, –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–π (NUMERIC/TEXT_MATRIX)"
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

#### –î–ª—è —Ç–µ–∫—Å—Ç–∞ (PROMPT_TEXT):
```json
{
  "text": "–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å–æ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü..."
}
```

#### –î–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (PROMPT_STRUCTURE):
```json
{
  "structure": {
    "headers": [
      {"level": 1, "title": "1. –í–≤–µ–¥–µ–Ω–∏–µ", "page": 1},
      {"level": 2, "title": "1.1. –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å", "page": 2},
      {"level": 1, "title": "2. –ê–Ω–∞–ª–∏–∑", "page": 5}
    ]
  }
}
```

#### –î–ª—è —Ç–∞–±–ª–∏—Ü (PROMPT_TABLES):
```json
{
  "tables": [
    {
      "id": "table_1",
      "type": "NUMERIC",
      "page": 3,
      "location": {"bbox": [100, 200, 400, 300], "page": 3},
      "preview": "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∑–∞ 2024 –≥–æ–¥"
    },
    {
      "id": "table_2",
      "type": "TEXT_MATRIX",
      "page": 5,
      "location": {"bbox": [100, 100, 400, 250], "page": 5},
      "preview": "–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫"
    }
  ]
}
```

---

## –í–∞—Ä–∏–∞–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ VLM-OCR

### –í–∞—Ä–∏–∞–Ω—Ç A: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –µ—Å—Ç—å VLM-OCR –º–æ–¥—É–ª—å

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–¥—É–ª—è
2. –°–æ–∑–¥–∞—Ç—å –∞–¥–∞–ø—Ç–µ—Ä –µ—Å–ª–∏ API –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è
3. –ó–∞–º–µ–Ω–∏—Ç—å MockVLMOCR –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å

**–ê–¥–∞–ø—Ç–µ—Ä:**
```python
# 02_src/processing/real_vlm_ocr_adapter.py
class RealVLMOCRAdapter:
    """–ê–¥–∞–ø—Ç–µ—Ä –¥–ª—è VLM-OCR –º–æ–¥—É–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""

    def __init__(self, user_module):
        self.module = user_module

    def extract(self, images, prompts):
        # –í—ã–∑—ã–≤–∞–µ–º –º–æ–¥—É–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        raw_response = self.module.process(images, prompts)

        # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ –Ω–∞—à —Ñ–æ—Ä–º–∞—Ç –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
        return self._adapt_response(raw_response)
```

---

### –í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LLM Gateway (Claude/GPT-4V)

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –°–æ–∑–¥–∞—Ç—å VLM-OCR –Ω–∞ –±–∞–∑–µ SimpleLLMGateway
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Claude Sonnet/Opus –∏–ª–∏ GPT-4V
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
# 02_src/processing/llm_vlm_ocr.py
from gateway.simple_llm_gateway import SimpleLLMGateway
from gateway.models import LLMMessage, LLMRequest

class LLMVLMOCR:
    """VLM-OCR –Ω–∞ –±–∞–∑–µ LLM Gateway."""

    def __init__(self, gateway: SimpleLLMGateway):
        self.gateway = gateway

    async def extract(self, images, prompts):
        # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ base64
        # –°–æ–∑–¥–∞–µ–º LLMRequest —Å vision
        # –í—ã–∑—ã–≤–∞–µ–º gateway.request()
        # –ü–∞—Ä—Å–∏–º –æ—Ç–≤–µ—Ç –≤ VLMOCRResponse
```

**–ü–ª—é—Å—ã:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π SimpleLLMGateway
- –ù–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –õ–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å

**–ú–∏–Ω—É—Å—ã:**
- –î–æ—Ä–æ–≥–æ (API –≤—ã–∑–æ–≤—ã –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π

---

### –í–∞—Ä–∏–∞–Ω—Ç C: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π VLM-OCR —Å–µ—Ä–≤–∏—Å

**–ü—Ä–∏–º–µ—Ä—ã:**
- Tesseract (Open Source)
- Azure Form Recognizer
- Google Document AI
- AWS Textract

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –í—ã–±—Ä–∞—Ç—å —Å–µ—Ä–≤–∏—Å
2. –°–æ–∑–¥–∞—Ç—å –∞–¥–∞–ø—Ç–µ—Ä
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å API –∫–ª—é—á–∏

---

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- –ó–∞–¥–∞—á–∏ 006-012 –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω—ã ‚úÖ
- –ó–∞–¥–∞—á–∞ 013 (CLI Interface) –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- **–ù–µ–æ–±—Ö–æ–¥–∏–º–æ:** VLM-OCR –º–æ–¥—É–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –≤—ã–±–æ—Ä –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –¥–ª—è Analyst

**–í–∞–∂–Ω–æ:**
- –≠—Ç–æ —Å–æ–≤–º–µ—Å—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- –ù—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å –∫–∞–∫–æ–π VLM-OCR –º–æ–¥—É–ª—å –µ—Å—Ç—å —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è —Å–æ–∑–¥–∞—Ç—å –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è API
- –í—Å–µ —Ä–µ—à–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã

**–ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ—Ä–∞–±–æ—Ç–∫–∏:**
1. –ö–∞–∫–æ–π VLM-OCR –º–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å?
2. –ü–æ–¥—Ö–æ–¥–∏—Ç –ª–∏ –µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–¥ –æ–∂–∏–¥–∞–µ–º—ã–π?
3. –ù—É–∂–µ–Ω –ª–∏ –∞–¥–∞–ø—Ç–µ—Ä –∏ –∫–∞–∫–∞—è –µ–≥–æ –ª–æ–≥–∏–∫–∞?
4. –ö–∞–∫–æ–π LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è VLM-OCR (–µ—Å–ª–∏ –í–∞—Ä–∏–∞–Ω—Ç B)?
5. –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ API?
6. –ù—É–∂–Ω–æ –ª–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤?

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- VLMOCRExtractor –æ–∂–∏–¥–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π `extract()` (—Å—Ç—Ä–æ–∫–∞ 158)
- –ï—Å–ª–∏ API –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π - –Ω—É–∂–µ–Ω wrapper
- –õ–æ–≥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ `04_logs/vlm_ocr/requests.json`
- –ù—É–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ edge cases (–ø—É—Å—Ç—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã, –æ—à–∏–±–∫–∏ API)

---

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# Python dependencies
pip list | grep -E "(pdf2image|fpdf2|Pillow|python-docx|openpyxl|langchain)"

# Poppler (–¥–ª—è Renderer)
# Windows: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ C:\Program Files\poppler\bin –≤ PATH
# Linux/Mac: which pdftoppm

# API Keys (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å .env)
cat .env
```

### –û–∂–∏–¥–∞–µ–º—ã–π output:
```
‚úÖ pdf2image 1.16.0
‚úÖ fpdf2 2.7.4
‚úÖ Pillow 10.0.0
‚úÖ python-docx 0.8.11
‚úÖ openpyxl 3.1.2
‚úÖ langchain 0.1.0
‚úÖ langchain-anthropic 0.1.0
‚úÖ langchain-openai 0.0.5
‚úÖ Poppler found at /usr/bin/pdftoppm
```

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏:

1. **–†–µ–∞–ª—å–Ω—ã–π VLM-OCR –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω:**
   - MockVLMOCR —Ç–æ–ª—å–∫–æ –≤ —Ç–µ—Å—Ç–∞—Ö
   - Production code –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å
   - –ê–¥–∞–ø—Ç–µ—Ä —Å–æ–∑–¥–∞–Ω –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

2. **–û–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:**
   - `.env` —Å API –∫–ª—é—á–∞–º–∏
   - Poppler —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   - –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã

3. **Pipeline —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ:**
   ```bash
   python scripts/test_pipeline.py my_document.docx
   ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è: DOCX ‚Üí PDF
   ‚úÖ –†–µ–Ω–¥–µ—Ä–∏–Ω–≥: PDF ‚Üí PNG
   ‚úÖ VLM-OCR: —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–µ mock!)
   ‚úÖ Skeleton: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
   ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: 04_storage/skeletons/doc_abc123.json
   ```

4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
   - README —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
   - –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–≥–ª—É—à–µ–∫ –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å–∞
   - –ì–∞–π–¥ –ø–æ –∑–∞–º–µ–Ω–µ VLM-OCR –º–æ–¥—É–ª—è

---

## –°–ª–µ–¥—É—é—â–∏–µ –∑–∞–¥–∞—á–∏

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:
- –ó–∞–¥–∞—á–∞ 013 (CLI Interface) –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- Pipeline –≥–æ—Ç–æ–≤ –¥–ª—è –ò—Ç–µ—Ä–∞—Ü–∏–∏ 3 (Navigation Index & Taxonomy)
- –ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

---

## –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏

- –ê–Ω–∞–ª–∏–∑ VLM-OCR –º–æ–¥—É–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: 2-4 —á–∞—Å–∞
- –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–∞–ø—Ç–µ—Ä–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ): 2-4 —á–∞—Å–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏): 1-2 —á–∞—Å–∞
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ: 2-4 —á–∞—Å–∞
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 1-2 —á–∞—Å–∞

**–ò—Ç–æ–≥–æ:** 1-2 –¥–Ω—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã
