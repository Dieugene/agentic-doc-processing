# Backlog проекта

**Дата создания:** 2025-01-23
**Версия:** 2.0
**Обновлено:** Добавлены задачи на основе implementation_plan.md

---

## Легенда статусов

- **Не начата** - Задача не назначена, ожидает начала
- **В работе** - Активно выполняется
- **На проверке** - Ожидает review от Reviewer
- **Выполнена** - Принята Tech Lead
- **Заблокирована** - Требуется вход от Architect или внешняя зависимость

---

## Итерация 1: Инфраструктурный слой

| ID | Название | Приоритет | Статус | Дата начала | Дата завершения | Зависит от |
|----|----------|-----------|--------|-------------|-----------------|------------|
| 001 | LLM Gateway: Queue и Batch Executor | High | Не начата | - | - | - |
| 002 | LLM Gateway: Response Router и Retry | High | Не начата | - | - | 001 |
| 003 | LLM Gateway: Rate Limit Control | High | Не начата | - | - | 002 |
| 004 | SGR Agent Core интеграция | High | Не начата | - | - | - |
| 005 | Unit тесты LLM Gateway | Medium | Не начата | - | - | 001, 002, 003 |

---

## Итерация 2: Слой данных (Document Skeleton)

| ID | Название | Приоритет | Статус | Дата начала | Дата завершения | Зависит от |
|----|----------|-----------|--------|-------------|-----------------|------------|
| 006 | Document Skeleton: структуры данных | High | Не начата | - | - | 004 |
| 007 | File Storage реализация | Medium | Не начата | - | - | - |
| 008 | Document Parser: базовый PDF/text | High | Не начата | - | - | 006 |
| 009 | Интеграционные тесты парсинга | Medium | Не начата | - | - | 006, 007, 008 |

---

## Итерация 3: Индексация (Navigation Index & Taxonomy)

| ID | Название | Приоритет | Статус | Дата начала | Дата завершения | Зависит от |
|----|----------|-----------|--------|-------------|-----------------|------------|
| 010 | Navigation Index и Taxonomy: структуры | High | Не начата | - | - | 009 |
| 011 | Indexator Agent (SGR) | High | Не начата | - | - | 010, 004 |
| 012 | Normalizer Agent (SGR) | High | Не начата | - | - | 010, 004 |
| 013 | Интеграционные тесты индексации | Medium | Не начата | - | - | 011, 012 |

---

## Итерация 4: Snapshot-агенты

| ID | Название | Приоритет | Статус | Дата начала | Дата завершения | Зависит от |
|----|----------|-----------|--------|-------------|-----------------|------------|
| 014 | Snapshot Agent: структуры данных | High | Не начата | - | - | 013 |
| 015 | Snapshot Generator | High | Не начата | - | - | 014, 011 |
| 016 | Snapshot Storage | Medium | Не начата | - | - | 014 |
| 017 | Инвалидация снэпшотов | Medium | Не начата | - | - | 015, 016 |
| 018 | Интеграционные тесты снэпшотов | Medium | Не начата | - | - | 015, 016, 017 |

---

## Итерация 5: Runtime (Dispatcher Agent)

| ID | Название | Приоритет | Статус | Дата начала | Дата завершения | Зависит от |
|----|----------|-----------|--------|-------------|-----------------|------------|
| 019 | Dispatcher Agent: базовая логика | High | Не начата | - | - | 018, 015 |
| 020 | Query Router и классификация | High | Не начата | - | - | 019 |
| 021 | Lazy-генерация снэпшотов | High | Не начата | - | - | 019, 015 |
| 022 | Dialog Manager (многошаговые запросы) | Medium | Не начата | - | - | 020 |
| 023 | Интеграционные тесты runtime | Medium | Не начата | - | - | 019, 020, 021 |

---

## Итерация 6: End-to-End Pipeline

| ID | Название | Приоритет | Статус | Дата начала | Дата завершения | Зависит от |
|----|----------|-----------|--------|-------------|-----------------|------------|
| 024 | Pipeline Orchestrator | High | Не начата | - | - | 023 |
| 025 | CLI Interface | High | Не начата | - | - | 024 |
| 026 | Start Topic Sets (предопределённые темы) | Medium | Не начата | - | - | 024 |
| 027 | E2E тест с реальным документом | High | Не начата | - | - | 024, 025 |
| 028 | REPL режим для интерактивных запросов | Medium | Не начата | - | - | 025 |

---

## Итерация 7: Document-Level Agent (опционально)

| ID | Название | Приоритет | Статус | Дата начала | Дата завершения | Зависит от |
|----|----------|-----------|--------|-------------|-----------------|------------|
| 029 | Document-Level Agent: базовая реализация | Medium | Не начата | - | - | 027 |
| 030 | BPMN Generation Tools | Low | Не начата | - | - | 029 |
| 031 | Process Decomposition | Low | Не начата | - | - | 029 |
| 032 | Тестовый кейс: регламент → BPMN | Medium | Не начата | - | - | 030, 031 |

---

## Технический долг (TBD вопросы)

Эти вопросы требуют проработки после накопления практического опыта.

| ID | Название | Область | Приоритет | Статус | Когда решать |
|----|----------|---------|-----------|--------|--------------|
| TBD-001 | Инкрементальность снэпшотов | Snapshot-Agents | Medium | Открыт | После 018 |
| TBD-002 | Мэппинг таксономий | Cross-Document Index | High | Открыт | При cross-document |
| TBD-003 | Инвалидация cross-document | Cross-Document Index | Medium | Открыт | При cross-document |
| TBD-004 | Неявные ссылки | Document Skeleton | Low | Открыт | По необходимости |
| TBD-005 | Выявление противоречий | Анализ | High | Открыт | После накопления базы |

---

## Спike / Research задачи

| ID | Название | Приоритет | Статус | Описание |
|----|----------|-----------|--------|----------|
| SP-001 | Выбор VLM для сканов | Medium | Не начата | Исследовать и выбрать VLM+VLM-OCR для обработки сканированных PDF |
| SP-002 | Оптимизация batching | Low | Не начата | Исследовать оптимальные batch_size и timeout для разных моделей |
| SP-003 | Альтернативы SGR Core | Low | Не начата | Оценить альтернативные фреймворки агентов |

---

## Приоритеты

### High (начать ASAP)
- 001-005: LLM Gateway - фундамент для всей системы
- 006-009: Document Skeleton - необходим для индексации
- 010-013: Индексация - необходима для снэпшотов
- 014-018: Snapshot-агенты - ключевой функционал
- 019-023: Runtime - пользовательский интерфейс
- 024-027: E2E Pipeline - работающая система

### Medium (важно, но не критично)
- Unit/интеграционные тесты (можно делать параллельно)
- TBD-002, TBD-005: важные architectural вопросы
- 028: REPL режим (можно добавить позже)
- 029: Document-Level Agent

### Low (nice to have)
- TBD-003, TBD-004: можно отложить
- 030-031: BPMN функциональность
- SP-002, SP-003: оптимизации

---

## Примечания

- Задачи 001-027 образуют **критический путь** к работающей системе
- Задачи 028-032 являются **расширениями** базовой функциональности
- TBD вопросы признаны допустимым техническим долгом для начала
- Приоритеты могут быть изменены Tech Lead при необходимости
- Новые задачи будут добавляться по мере работы
