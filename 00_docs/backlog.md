# Backlog проекта

**Дата создания:** 2025-01-23
**Версия:** 2.0
**Обновлено:** Добавлены задачи на основе implementation_plan.md

---

## Легенда статусов

- **Не начата** - Задача не назначена, ожидает начала
- **В работе** - Активно выполняется
- **На проверке** - Ожидает review от Reviewer
- **Выполнена** - Принята Tech Lead
- **Заблокирована** - Требуется вход от Architect или внешняя зависимость

---

## Итерация 1: Инфраструктурный слой

| ID | Название | Приоритет | Статус | Дата начала | Дата завершения | Зависит от |
|----|----------|-----------|--------|-------------|-----------------|------------|
| 001 | LLM Gateway: Queue и Batch Executor | High | Не начата | - | - | - |
| 002 | LLM Gateway: Response Router и Retry | High | Не начата | - | - | 001 |
| 003 | LLM Gateway: Rate Limit Control | High | Не начата | - | - | 002 |
| 004 | SGR Agent Core интеграция | High | Не начата | - | - | - |
| 005 | Unit тесты LLM Gateway | Medium | Не начата | - | - | 001, 002, 003 |

---

## Итерация 2: Слой данных (Document Skeleton)

| ID | Название | Приоритет | Статус | Дата начала | Дата завершения | Зависит от |
|----|----------|-----------|--------|-------------|-----------------|------------|
| 006 | Document Skeleton: структуры данных | High | Не начата | - | - | 004 |
| 007 | File Storage реализация | Medium | Не начата | - | - | - |
| 008 | VLM-OCR Extractor (обёртка над модулем) | High | Не начата | - | - | 006 |
| 009 | Converter (DOCX/Excel → PDF) | High | Не начата | - | - | 006 |
| 010 | Renderer (PDF → PNG) | High | Не начата | - | - | 006 |
| 011 | Skeleton Builder (агрегация VLM-OCR результатов) | High | Не начата | - | - | 008, 010 |
| 012 | Интеграционные тесты парсинга | Medium | Не начата | - | - | 008, 009, 010, 011 |

---

## Итерация 3: Индексация (Navigation Index & Taxonomy)

| ID | Название | Приоритет | Статус | Дата начала | Дата завершения | Зависит от |
|----|----------|-----------|--------|-------------|-----------------|------------|
| 013 | Navigation Index и Taxonomy: структуры | High | Не начата | - | - | 012 |
| 014 | Indexator Agent (SGR) | High | Не начата | - | - | 013, 004 |
| 015 | Normalizer Agent (SGR) | High | Не начата | - | - | 013, 004 |
| 016 | Интеграционные тесты индексации | Medium | Не начата | - | - | 014, 015 |

---

## Итерация 4: Обработка таблиц

| ID | Название | Приоритет | Статус | Дата начала | Дата завершения | Зависит от |
|----|----------|-----------|--------|-------------|-----------------|------------|
| 017 | Table Classifier (через VLM-OCR) | High | Не начата | - | - | 008 |
| 018 | Table Extractor (числовые из исходника) | High | Не начата | - | - | 017 |
| 019 | Cell Flattening (текстовые через VLM-OCR) | High | Не начата | - | - | 008, 017 |
| 020 | Pandas интеграция для вычислений | Medium | Не начата | - | - | 018 |
| 021 | Тесты обработки таблиц | Medium | Не начата | - | - | 017, 018, 019 |

---

## Итерация 5: Snapshot-агенты

| ID | Название | Приоритет | Статус | Дата начала | Дата завершения | Зависит от |
|----|----------|-----------|--------|-------------|-----------------|------------|
| 022 | Snapshot Agent: структуры данных | High | Не начата | - | - | 016 |
| 023 | Snapshot Generator | High | Не начата | - | - | 022, 014 |
| 024 | Snapshot Storage | Medium | Не начата | - | - | 022 |
| 025 | Инвалидация снэпшотов | Medium | Не начата | - | - | 023, 024 |
| 026 | Интеграционные тесты снэпшотов | Medium | Не начата | - | - | 023, 024, 025 |

---

## Итерация 6: Runtime (Dispatcher Agent)

| ID | Название | Приоритет | Статус | Дата начала | Дата завершения | Зависит от |
|----|----------|-----------|--------|-------------|-----------------|------------|
| 027 | Dispatcher Agent: базовая логика | High | Не начата | - | - | 026, 023 |
| 028 | Query Router и классификация | High | Не начата | - | - | 027 |
| 029 | Lazy-генерация снэпшотов | High | Не начата | - | - | 027, 023 |
| 030 | Dialog Manager (многошаговые запросы) | Medium | Не начата | - | - | 028 |
| 031 | Интеграционные тесты runtime | Medium | Не начата | - | - | 027, 028, 029 |

---

## Итерация 7: End-to-End Pipeline

| ID | Название | Приоритет | Статус | Дата начала | Дата завершения | Зависит от |
|----|----------|-----------|--------|-------------|-----------------|------------|
| 032 | Pipeline Orchestrator | High | Не начата | - | - | 031 |
| 033 | CLI Interface | High | Не начата | - | - | 032 |
| 034 | Start Topic Sets (предопределённые темы) | Medium | Не начата | - | - | 032 |
| 035 | E2E тест с реальным документом | High | Не начата | - | - | 032, 033 |
| 036 | REPL режим для интерактивных запросов | Medium | Не начата | - | - | 033 |

---

## Итерация 8: Document-Level Agent (опционально)

| ID | Название | Приоритет | Статус | Дата начала | Дата завершения | Зависит от |
|----|----------|-----------|--------|-------------|-----------------|------------|
| 037 | Document-Level Agent: базовая реализация | Medium | Не начата | - | - | 035 |
| 038 | DocumentCollection (группировка файлов) | Medium | Не начата | - | - | 037 |
| 039 | BPMN Generation Tools | Low | Не начата | - | - | 037 |
| 040 | Process Decomposition | Low | Не начата | - | - | 037 |
| 041 | Тестовый кейс: регламент → BPMN | Medium | Не начата | - | - | 038, 039 |

---

## Технический долг (TBD вопросы)

Эти вопросы требуют проработки после накопления практического опыта.

| ID | Название | Область | Приоритет | Статус | Когда решать |
|----|----------|---------|-----------|--------|--------------|
| TBD-001 | Инкрементальность снэпшотов | Snapshot-Agents | Medium | Открыт | После 018 |
| TBD-002 | Мэппинг таксономий | Cross-Document Index | High | Открыт | При cross-document |
| TBD-003 | Инвалидация cross-document | Cross-Document Index | Medium | Открыт | При cross-document |
| TBD-004 | Неявные ссылки | Document Skeleton | Low | Открыт | По необходимости |
| TBD-005 | Выявление противоречий | Анализ | High | Открыт | После накопления базы |

---

## Spike / Research задачи

| ID | Название | Приоритет | Статус | Описание |
|----|----------|-----------|--------|----------|
| SP-001 | Тестирование VLM-OCR модуля | High | Не начата | Протестировать существующий PoC VLM-OCR на реальных документах, оценить качество extraction |
| SP-002 | Оптимизация batch prompts | Medium | Не начата | Исследовать оптимальные стратегии для batch prompts (текст+структура+таблицы в одном вызове) |
| SP-003 | Оптимизация sliding window | Low | Не начата | Исследовать оптимальный размер окна для многостраничных документов |
| SP-004 | Альтернативы SGR Core | Low | Не начата | Оценить альтернативные фреймворки агентов |

---

## Приоритеты

### High (начать ASAP)
- 001-005: LLM Gateway - фундамент для всей системы
- 006-012: Document Skeleton + VLM-OCR pipeline - необходим для индексации
- 013-016: Индексация - необходима для снэпшотов
- 017-021: Обработка таблиц - критично для Excel документов
- 022-026: Snapshot-агенты - ключевой функционал
- 027-031: Runtime - пользовательский интерфейс
- 032-035: E2E Pipeline - работающая система
- SP-001: Тестирование VLM-OCR PoC - критично для старта

### Medium (важно, но не критично)
- Unit/интеграционные тесты (можно делать параллельно)
- TBD-002, TBD-005: важные architectural вопросы
- 036: REPL режим (можно добавить позже)
- 037-038: Document-Level Agent + DocumentCollection
- SP-002, SP-003: Оптимизации

### Low (nice to have)
- TBD-003, TBD-004: можно отложить
- 039-041: BPMN функциональность
- SP-004: Альтернативы SGR Core

---

## Примечания

- Задачи 001-035 образуют **критический путь** к работающей системе
- Задачи 036-041 являются **расширениями** базовой функциональности
- **VLM-OCR модуль (PoC)** уже существует у пользователя - задача 008 это обёртка
- TBD вопросы признаны допустимым техническим долгом для начала
- Приоритеты могут быть изменены Tech Lead при необходимости
- Новые задачи будут добавляться по мере работы

---

## Архитектурные решения (ADR)

| ADR | Тема | Статус | Влияет на задачи |
|-----|------|--------|------------------|
| 001 | Форматы документов и обработка таблиц | Принято | 008-021 |
| 002 | Мультидокументность (DocumentCollection) | Принято | 037-041 |
| 003 | Интеграция VLM-OCR модуля | Принято | 008-012 |
